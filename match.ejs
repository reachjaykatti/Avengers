

<%- include('../partials/head', {title}) %>

<h1><%= match.name %></h1>
<a class="btn btn-link js-back"
   href="<%= prevUrl || ('/series/' + series.id + '/matches') %>"
   data-fallback="/series/<%= series.id %>/matches">← Back to Matches</a>

<div class="card">
  <div><strong>Series:</strong> <%= series.name %></div>
  <div><strong>Teams:</strong> <%= match.team_a %> vs <%= match.team_b %></div>
  <div><strong>Start (IST):</strong> <%= match.startIstStr %></div>
  <div><strong>Entry Points:</strong> <%= match.entry_points %></div>
  <div><strong>Status:</strong> <%= match.status %></div>
</div>

<h2>Declarations</h2>
<div class="grid" style="grid-template-columns:1fr 1fr; gap:1rem;">
  <div class="card">
    <h3><%= match.team_a %> — Declared members</h3>
    <ul>
      <% if (probableNames && probableNames.A && probableNames.A.length) { %>
        <% probableNames.A.forEach(function(name){ %><li><%= name %></li><% }) %>
      <% } else { %>
        <li class="text-muted">No declarations yet.</li>
      <% } %>
    </ul>
  </div>
  <div class="card">
    <h3><%= match.team_b %> — Declared members</h3>
    <ul>
      <% if (probableNames && probableNames.B && probableNames.B.length) { %>
        <% probableNames.B.forEach(function(name){ %><li><%= name %></li><% }) %>
      <% } else { %>
        <li class="text-muted">No declarations yet.</li>
      <% } %>
    </ul>
  </div>
</div>

<% if (showAll && probable) { %>
  <h2>Probable Winnings (after cutoff)</h2>
  <div class="grid" style="grid-template-columns:1fr 1fr; gap:1rem;">
    <div class="card">
      <h3>If <%= match.team_a %> wins</h3>
      <div>Winners: <strong><%= probable.A.winners %></strong></div>
      <div>Losers: <strong><%= probable.A.losers %></strong></div>
      <div>Total Pot: <strong><%= probable.A.totalPot %></strong></div>
      <div>Per Winner: <strong><%= probable.A.perWinner.toFixed ? probable.A.perWinner.toFixed(2) : probable.A.perWinner %></strong></div>
    </div>
    <div class="card">
      <h3>If <%= match.team_b %> wins</h3>
      <div>Winners: <strong><%= probable.B.winners %></strong></div>
      <div>Losers: <strong><%= probable.B.losers %></strong></div>
      <div>Total Pot: <strong><%= probable.B.totalPot %></strong></div>
      <div>Per Winner: <strong><%= probable.B.perWinner.toFixed ? probable.B.perWinner.toFixed(2) : probable.B.perWinner %></strong></div>
    </div>
  </div>
<% } else { %>
  <div class="chip"><span class="dot dot-info"></span> Probable winnings will be shown after cutoff time.</div>
<% } %>

<% if (myMatchPoints !== null) { %>
  <h2>My Points (Final)</h2>
  <div class="card">
    <strong><%= myMatchPoints.toFixed ? myMatchPoints.toFixed(2) : myMatchPoints %></strong>
  </div>
<% } %>

<%- include('../partials/foot') %>
